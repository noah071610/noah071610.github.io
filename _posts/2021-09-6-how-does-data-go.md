---
layout: post
title: 🧐 2. 근데 인터넷에서 데이터는 어떻게 가죠? | 웹모르는 웹개발자
subtitle: How does data go on the Internet?
tags: [cs, 웹모르는웹개발자]
---

<p></p>

# 근데 인터넷에서 데이터는 어떻게 가죠?

저번글에서 우리는 인터넷 네트워크의 원리에 대해서 배웠습니다.

하지만 어떻게 나의 데이터가 상대방의 컴퓨터로 전송이 되는지 아직 금시초문입니다.

어떻게 데이터가 상대방에 컴퓨터로 전송되는걸까요?

## TCP/IP 프로토콜

<img src="https://t1.daumcdn.net/cfile/blog/263B97395102A38D23" alt="" />

- 출처 : https://t1.daumcdn.net/cfile/blog/

<br/>

우리가 인터넷으로 데이터를 전송을 할때 보통 TCP/IP 프로토콜을 사용합니다.

OSI 프로토콜을 실제 사용하는 인터넷 표준이 TCP/IP 프로토콜이기때문에 우린 이쪽을 배우겠습니다.

그럼 TCP/IP 프로토콜이 뭘까요? 일단 Protocol의 의미부터 알아봅시다.

<img src="https://images.velog.io/images/noah071610/post/99a1070f-9562-40f8-a7d9-2a424422e13c/image.png" alt="" />

네이버가 아주 정확히 정답을 말해주고있습니다. 프로토콜은 통신규약입니다.

즉 TCP/IP 프로토콜 이란 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 통신규약(프로토콜)의 모음입니다.

그럼 TCP 와 IP는 뭘까요?

## IP

IP는 예전에도 말씀드렸다시피 컴퓨터의 고유한 번호, 사람으로 치면 주민등록번호입니다.

TCP/IP 프로토콜의 IP패킷안에는 출발IP와 목적IP가 담겨져있습니다.

> **패킷이란?**

IP Header가 붙은 형태의 메세지라고 생각하면 편합니다.

단순하게 생각하면 IP패킷만 있다면 인터넷 네트워크로 데이터전송이 가능해보입니다.

하지만 수많은 단점과 예외들이 존재합니다.

받는 서버가 중단이 되어서 패킷이 전송불가 될수도있고

중간에 수많은 노드(서버)를 거치는 도중 중간노드의 오류로 소실될수있으며

패킷 전달 순서에서 문제가 발생하기도합니다.

이 문제를 해결하기위해서 TCP와UDP가 등장하게 됩니다.

## TCP와 UDP

TCP와 UDP는 IP를 보완해주는 프로토콜입니다.

처음으로 알아볼것은 TCP입니다. TCP는 연결지향 , 데이터 전달과 순서를 보장합니다.

### TCP - 연결지향

TCP는 3 way handshake 이라는 연결지향 기법을 사용하는데요.

SYN과 ACK가 사용됩니다.

SYN은 접속을 ACK는 수락을 의미하며 이렇게 SYN과 ACK을 보냄으로서 서로 논리적 연결망을 형성하게됩니다.

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Tcp_normal.svg/1200px-Tcp_normal.svg.png" alt="" />

1. **TCP - 데이터 전달 보장** <br/><br/> 목적 컴퓨터에서 출발 컴퓨터에게 전달이 완료됬다는 메세지를 보내줌으로서 데이터 전달을 보장합니다. <br/><br/> (IP패킷만 있으면 데이터소실시 어떻게 됬는지 모르니 데이터 전달이 보장이 안되는것이죠)

2. **TCP - 순서 보장** <br/><br/> 만약 목적 컴퓨터에서 순서가 잘못되어있으면 그 사실을 알려줍니다. <br/><br/> 엥? 어떻게 아냐구요? 그건 TCP 세그먼트에 순서를 기록해두었기때문입니다.

{: .box-note}
**세그먼트란?** : 데이터 전송을 위해 적절한 크기로 분할한 조각입니다.

## UDP

UDP는 IP와 거의 달라진것이 없지만 PORT번호가 추가됩니다.

{: .box-note}
**PORT란?** : IP 내에서 프로세스 구분을 하기 위해 사용합니다.

예를들어 HTTP의 80 HTTPS의 443포트가 대표적입니다. 만약 데이터에 포트번호가 없다면 데이터는 목적 컴퓨터 IP에 도착하고 이 데이터가 메이플스토리로 가야하는지 웹으로가야하는지 갈팡질팡 어리버리를 타게됩니다.

PORT정보를 제외하고 IP와 달라진게 거의 없다면 이말은 즉 UDP는 TCP처럼 전달의 신뢰성은 없다는 방증도 되겠네요. (순서,전달 보장 X)

그럼 여기서 의문점이 생깁니다. 우리가 구지 UDP를 써야할 필요가 있을까요?

UDP는 TCP처럼 데이터 전달 순서등을 보장하지않지만 속도가 빠르기 때문에 영상이나 화상통화같은 경우엔 UDP를 사용하는게 유리할 것입니다.

## 이제 데이터를 보내봅시다.

우리는 우여곡절끝에 TCP/IP 프로토콜에 대해서 알게됬습니다.

이제 데이터를 보내봅시다.

<img src="https://media.vlpt.us/images/wldus9503/post/5f7eacb1-9912-4096-b7b0-0d334ca80892/1_WQ6b_PMWV3yXHfcZkkyOMA.png" alt="" />

- 출처 :https://velog.io/@wldus9503/

<br/>

우리는 데이터를 보내는 입장이니 위에서부터 아래로 가게됩니다.

1. **어플리케이션 계층 (응용 계층)** <br/><br/>
웹개발자라면 개발자도구의 Network탭에서 자주 HTTP Request 와 Response 메세지를 확인하지 않나요? <br/><br/> (아니라면 자주보는게 좋습니다. 웹은 HTTP로 시작해 HTTP로 끝나기 때문이죠.) <br/><br/>
어플리케이션 계층에서 그 부분을 작성하는것입니다. <br/><br/>
또한 이부분에는 URI도 포함되는데요 아하 그래서 우리가 axios나 fetch등 비동기 HTTP 통신시 base url을 작성하거나 설정하는거네요!

2. **전송 계층** <br/><br/>
이쪽에서는 위쪽에서 말씀드린 TCP 또는 UDP 세그먼트를 작성합니다. <br/><br/>
IP의 한계를 극복하기 위해서이죠.

3. **인터넷 계층** <br/><br/>
여기서는 IP패킷을 작성합니다. 출발 컴퓨터 IP 와 목적 컴퓨터 IP을 작성합니다. <br/><br/>

4. **네트워크 인터페이스 계층** <br/><br/>
OSI 7계층에서 물리,데이터링크 계층이 있는걸 기억하실겁니다. 그 두개를 합쳐서 네트워크 인터페이스 계층이라고도 말합니다. <br/><br/>
물리계층은 데이터를 전기적인 신호로 변환해서 주고받는 기능을 하며 데이터링크계층은 송수신되는 정보의 오류와 흐름을 관리합니다. <br/><br/> 
간단하게 물리계층을 보조하는 역할입니다. <br/><br/>
데이터 링크 -> 물리 순으로 이동하며 데이터를 전송합니다.

5. **목적 컴퓨터가 수신** <br/><br/>
목적 컴퓨터가 수신하면 역방향 (네트워크 인터페이스 => 인터넷 => 전송 => 어플리케이션) 계층으로 올라가며 디코딩을 하며 데이터 전송에 성공합니다!!!

## 마치며

우리는 인터넷 네트워크와 데이터가 어떻게 전송되는지 알아봤습니다. 이제 흐릿했던 윤곽이 서서히 잡혀가네요.

다음 웹모르는웹개발자 에서는 우리가 지금까지 배운 인터넷 네트워크상에서 웹을 연결시켜주는 브라우저의 렌더링 방식에 대해서 알려드리겠습니다.
